<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mickarin</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="main-menu">
      <h2>Mickarin Online</h2>
      <div id="create-game-form">
        <h3>Créer une partie</h3>
        <input
          type="text"
          id="player-name-create"
          placeholder="Votre nom"
          required
        />
        <input
          type="number"
          id="player-yob-create"
          placeholder="Année de naissance"
          required
        />
        <button id="create-game-btn">Créer</button>
      </div>
      <hr />
      <div id="join-game-form">
        <h3>Rejoindre une partie</h3>
        <input
          type="text"
          id="game-code-join"
          placeholder="Code de la partie"
          style="text-transform: uppercase"
          required
        />
        <input
          type="text"
          id="player-name-join"
          placeholder="Votre nom"
          required
        />
        <input
          type="number"
          id="player-yob-join"
          placeholder="Année de naissance"
          required
        />
        <button id="join-game-btn">Rejoindre</button>
      </div>
    </div>

    <!-- Add a new Lobby Modal to replace the old setup modal -->
    <div id="lobby-modal" class="modal hidden">
      <h2>Lobby de la partie</h2>
      <p>Code de la partie : <b id="lobby-game-code"></b></p>
      <h3>Joueurs Connectés</h3>
      <ul id="lobby-player-list"></ul>
      <button id="start-game-btn" class="hidden">Commencer la partie</button>
    </div>
    <div id="game-container" class="hidden">
      <div id="board-container">
        <div id="center-panel">
          <div id="dice-result-display"></div>
          <h2>La Machine</h2>
          <div id="machine-tiles"></div>
          <div id="machine-controls">
            <button id="take-tile-btn" class="hidden">
              Prendre gratuitement
            </button>
            <button id="relaunch-btn" class="hidden">
              Relancer le tourniquet
            </button>
          </div>
        </div>
        <div id="board"></div>
      </div>
      <div id="controls-panel">
        <div id="current-player-info">
          <h3 id="player-turn"></h3>
          <p>Argent: <span id="player-money"></span></p>
        </div>
        <button id="roll-dice-btn">Lancer le dé</button>
        <p id="dice-result"></p>
        <div id="game-log">
          <p>Bienvenue sur le Mickarin!</p>
        </div>
      </div>
      <div id="players-panel"></div>
    </div>

    <!-- Modals -->
    <div id="modal-backdrop" class="hidden"></div>

    <div id="setup-modal" class="modal">
      <h2>Configuration de la partie</h2>
      <label for="player-count">Nombre de joueurs (2-8):</label>
      <input type="number" id="player-count" min="2" max="8" value="2" />
      <button id="setup-players-btn">Configurer les joueurs</button>

      <div id="players-setup" class="hidden">
        <h3>Informations des joueurs</h3>
        <div id="players-inputs"></div>
        <button id="start-game-btn">Commencer la partie</button>
      </div>
    </div>

    <div id="auction-modal" class="modal hidden">
      <h2>Enchères !</h2>
      <p>Un lot de tuiles est mis aux enchères.</p>
      <div id="auction-tiles"></div>
      <p id="auction-info"></p>
      <div class="auction-bid">
        <label for="bid-amount">Votre offre :</label>
        <input type="number" id="bid-amount" min="1" />
        <button id="place-bid-btn">Enchérir</button>
        <button id="pass-bid-btn">Passer</button>
      </div>
    </div>

    <div id="steal-modal" class="modal hidden">
      <h2>Vol de tuile</h2>
      <p id="steal-info"></p>
      <div id="steal-options"></div>
    </div>

    <div id="sell-modal" class="modal hidden">
      <h2>Vendre des tuiles</h2>
      <p id="sell-info">
        Cliquez sur les tuiles que vous voulez vendre. Tuile normale: 200€,
        Tuile spéciale: 400€
      </p>
      <div id="sell-tiles-container"></div>
      <div id="sell-controls">
        <p id="sell-total">Total: 0€</p>
        <button id="confirm-sell-btn" disabled>Vendre</button>
        <button id="cancel-sell-btn">Annuler</button>
      </div>
    </div>

    <div id="winner-modal" class="modal hidden">
      <h2 id="winner-message"></h2>
      <button id="restart-game-btn">Rejouer</button>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
  </body>
</html>
